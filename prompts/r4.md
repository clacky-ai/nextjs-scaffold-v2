重构 @/Users/danney/dev/ai-coding/clacky/next-basic-scaffold-refactor/client/src/lib/api.ts 代码。

1. 我希望 api 请求的代码类似于：
```
async function throwIfResNotOk(res: Response) {
  if (!res.ok) {
    const text = (await res.text()) || res.statusText;
    throw new Error(`${res.status}: ${text}`);
  }
}

export async function apiRequest(
  method: string,
  url: string,
  data?: unknown | undefined,
): Promise<Response> {
  const res = await fetch(url, {
    method,
    headers: data ? { "Content-Type": "application/json" } : {},
    body: data ? JSON.stringify(data) : undefined,
    credentials: "include",
  });

  await throwIfResNotOk(res);
  return res;
}
```

2. 在这个请求代码中可以 提供 throwIfResNotOk  这样的错误抛出方式，
3. 在这个请求代码中可以 提供 credentials: "include" 这样的认证方式
4. 我希望不再使用  const authStorage = localStorage.getItem('auth-storage'); 这样的本地存储方式来获取 token，而是使用 cookie 的方式来获取 token。 你可以参考一下 nextjs 的鉴权方案，以及 csrf 相关的问题处理。
5. api.ts 中不再提供 API_ENDPOINTS 这样的常量，而是直接在代码中写入 API 地址。
6. api.ts 中不再提供 ApiResponse 和 PaginatedResponse 这样的类型定义，而是根据 server 开发时的实际情况具体处理。

-------

1. 开始写代码前请认真阅读仓库中后端和前端关于 auth 的相关代码
2. 写代码之前提供 3 个方案跟我确认，再开始写代码