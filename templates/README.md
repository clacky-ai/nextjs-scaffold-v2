# åŸå­åŒ–ç«¯æ¨¡æ¿ç³»ç»Ÿ

è¿™æ˜¯ä¸€ä¸ªåŸºäº LLM é¢„æµ‹çš„å¤šç«¯ Next.js é¡¹ç›®è‡ªåŠ¨åŒ–è„šæ‰‹æ¶ç³»ç»Ÿã€‚

## ğŸ¯ ç³»ç»Ÿæ¦‚è§ˆ

### å·¥ä½œæµç¨‹
1. **LLM åˆ†æ** â†’ æ ¹æ®ä¸šåŠ¡åœºæ™¯åˆ†æéœ€è¦å‡ ä¸ªç«¯
2. **é…ç½®ç”Ÿæˆ** â†’ ç”Ÿæˆ `templates/config.json` é…ç½®æ–‡ä»¶
3. **æ¨¡æ¿æ¸²æŸ“** â†’ åŸºäºé…ç½®æ¸²æŸ“åŸå­åŒ–æ¨¡æ¿
4. **é¡¹ç›®åˆå¹¶** â†’ å°†æ¸²æŸ“ç»“æœåˆå¹¶åˆ°é¡¹ç›®ä¸­

### æ ¸å¿ƒç‰¹æ€§
- ğŸ¤– **LLM é©±åŠ¨**ï¼šæ ¹æ®ä¸šåŠ¡åœºæ™¯æ™ºèƒ½åˆ†æç«¯çš„éœ€æ±‚
- ğŸ§© **åŸå­åŒ–è®¾è®¡**ï¼šæ¯ä¸ªç«¯éƒ½æ˜¯å®Œæ•´çš„ã€ç‹¬ç«‹çš„æ¨¡å—
- ğŸ”§ **çµæ´»åˆå¹¶**ï¼šæ”¯æŒä»£ç ç‰‡æ®µåˆå¹¶åˆ°ç°æœ‰æ–‡ä»¶
- ğŸ“ **æ ‡å‡†åŒ–æ¶æ„**ï¼šç”Ÿæˆä¸€è‡´çš„é¡¹ç›®ç»“æ„

## ğŸ“Š æ”¯æŒçš„ç«¯ç±»å‹

æ ¹æ® few shot åˆ†æï¼Œç³»ç»Ÿæ”¯æŒå„ç§ä¸šåŠ¡åœºæ™¯ï¼š

### ç”µå•†åœºæ™¯
- **é¡¾å®¢ç«¯**ï¼šè´­ç‰©ã€è®¢å•ç®¡ç†ã€ä¸ªäººä¸­å¿ƒ
- **å•†å®¶ç«¯**ï¼šå•†å“ç®¡ç†ã€è®¢å•å¤„ç†ã€æ•°æ®åˆ†æ  
- **ç®¡ç†å‘˜ç«¯**ï¼šå¹³å°ç®¡ç†ã€å•†å®¶å®¡æ ¸

### SaaSåœºæ™¯
- **ç”¨æˆ·ç«¯**ï¼šä½¿ç”¨äº§å“åŠŸèƒ½ã€å›¢é˜Ÿåä½œ
- **ç®¡ç†å‘˜ç«¯**ï¼šç§Ÿæˆ·ç®¡ç†ã€ç³»ç»Ÿç›‘æ§

### å†…å®¹å¹³å°
- **è®¿å®¢ç«¯**ï¼šå†…å®¹æµè§ˆã€äº’åŠ¨
- **åˆ›ä½œè€…ç«¯**ï¼šå†…å®¹ç®¡ç†ã€æ•°æ®åˆ†æ
- **ç®¡ç†å‘˜ç«¯**ï¼šå†…å®¹å®¡æ ¸ã€å¹³å°ç®¡ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
pnpm install
```

### 2. é…ç½®ç«¯ä¿¡æ¯
ç¼–è¾‘ `templates/config.json`ï¼Œæˆ–é€šè¿‡ LLM è‡ªåŠ¨ç”Ÿæˆï¼š

```json
{
  "scenario": "å–å’–å•¡ç‹¬ç«‹ç½‘ç«™",
  "endpoints": [
    {
      "name": "customer",
      "displayName": "é¡¾å®¢ç«¯",
      "pathPrefix": "/(customer)",
      "defaultPage": "account",
      "hasSignUp": true,
      "hasUnauthorized": true,
      "authType": "nextauth",
      "tableName": "users",
      "loginField": "email"
    }
  ]
}
```

### 3. æ‰§è¡Œæ¸²æŸ“
```bash
pnpm template:render
```

### 4. åˆå§‹åŒ–æ•°æ®åº“
```bash
pnpm db:push
pnpm db:seed
```

## ğŸ“ ç”Ÿæˆçš„é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (customer)/          # é¡¾å®¢ç«¯é¡µé¢
â”‚   â”œâ”€â”€ merchant/            # å•†å®¶ç«¯é¡µé¢
â”‚   â”œâ”€â”€ admin/               # ç®¡ç†å‘˜ç«¯é¡µé¢
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ customer/        # é¡¾å®¢ç«¯API
â”‚       â”œâ”€â”€ merchant/        # å•†å®¶ç«¯API
â”‚       â””â”€â”€ admin/           # ç®¡ç†å‘˜ç«¯API
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ auth/               # å„ç«¯è®¤è¯é…ç½®
â”‚   â””â”€â”€ db/schema/          # å„ç«¯æ•°æ®è¡¨
â”œâ”€â”€ stores/                 # æŒ‰ç«¯åˆ†ç¦»çš„çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ customer/
â”‚   â”œâ”€â”€ merchant/
â”‚   â””â”€â”€ admin/
â”œâ”€â”€ components/             # æŒ‰ç«¯åˆ†ç¦»çš„ç»„ä»¶
â”‚   â”œâ”€â”€ customer/
â”‚   â”œâ”€â”€ merchant/
â”‚   â””â”€â”€ admin/
â””â”€â”€ middleware.ts          # åˆå¹¶æ‰€æœ‰ç«¯çš„è®¤è¯é€»è¾‘
```

## ğŸ”§ é…ç½®è¯¦è§£

### ç«¯é…ç½®å‚æ•° (EndpointConfig)

| å‚æ•° | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `name` | string | ç«¯åç§°ï¼ˆè‹±æ–‡ï¼‰ | "customer", "merchant", "admin" |
| `displayName` | string | ç«¯æ˜¾ç¤ºåç§° | "é¡¾å®¢ç«¯", "å•†å®¶ç«¯" |
| `pathPrefix` | string | è·¯ç”±å‰ç¼€ | "/(customer)", "/merchant" |
| `defaultPage` | string | ç™»å½•åé»˜è®¤é¡µé¢ | "account", "dashboard" |
| `hasSignUp` | boolean | æ˜¯å¦æ”¯æŒæ³¨å†Œ | true, false |
| `hasUnauthorized` | boolean | æ˜¯å¦æœ‰æœªç™»å½•çŠ¶æ€ | true, false |
| `authType` | string | è®¤è¯ç±»å‹ | "nextauth", "custom" |
| `tableName` | string | æ•°æ®åº“è¡¨å | "users", "merchant_users" |
| `loginField` | string | ç™»å½•å­—æ®µ | "email", "username" |
| `hasNavigation` | boolean | æ˜¯å¦éœ€è¦å¯¼èˆªæ  | true, false |
| `hasSidebar` | boolean | æ˜¯å¦éœ€è¦ä¾§è¾¹æ  | true, false |
| `roles` | string[] | è§’è‰²åˆ—è¡¨ | ["åº—é•¿", "å‘˜å·¥"] |

### é»˜è®¤é¡µé¢å‘½åè§„åˆ™

- **æ•°æ®é©±åŠ¨å‹** (`isDataDriven: true`) â†’ `dashboard`
  - å•†å®¶ç«¯ã€ç®¡ç†å‘˜ç«¯ã€SaaSå·¥å…·
- **ä¸ªäººç®¡ç†å‹** (`isDataDriven: false`) â†’ `account`
  - ç”µå•†é¡¾å®¢ç«¯ã€ä¸ªäººåšå®¢è¯»è€…
- **å†…å®¹æ¶ˆè´¹å‹** â†’ `home` æˆ– `feed`
  - ç¤¾äº¤å¹³å°ã€å†…å®¹å¹³å°

## ğŸ“ æ¨¡æ¿ç³»ç»Ÿ

### ç›®å½•ç»“æ„
```
templates/
â”œâ”€â”€ basic/                  # åŸºç¡€åŸå­åŒ–æ¨¡æ¿
â”‚   â”œâ”€â”€ src/               # æºç æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ app/           # é¡µé¢æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ lib/           # å·¥å…·åº“æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ stores/        # çŠ¶æ€ç®¡ç†æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ components/    # ç»„ä»¶æ¨¡æ¿
â”‚   â””â”€â”€ code-snippets/     # ä»£ç ç‰‡æ®µ
â”‚       â”œâ”€â”€ src__middleware.ts/
â”‚       â”œâ”€â”€ drizzle.config.ts/
â”‚       â””â”€â”€ package.json/
â”œâ”€â”€ config.json           # ç«¯é…ç½®ï¼ˆLLMç”Ÿæˆï¼‰
â””â”€â”€ render.ts             # æ¸²æŸ“å¼•æ“
```

### æ¨¡æ¿å˜é‡
- `{{ENDPOINT_NAME}}` â†’ ç«¯åç§°
- `{{ENDPOINT_PATH}}` â†’ è·¯ç”±è·¯å¾„
- `{{DEFAULT_PAGE}}` â†’ é»˜è®¤é¡µé¢å
- `{{displayName}}` â†’ æ˜¾ç¤ºåç§°

### Handlebars è¾…åŠ©å‡½æ•°
- `{{pascalCase name}}` â†’ PascalCase
- `{{camelCase name}}` â†’ camelCase  
- `{{kebabCase name}}` â†’ kebab-case
- `{{snakeCase name}}` â†’ snake_case
- `{{eq a b}}` â†’ ç­‰å€¼æ¯”è¾ƒ
- `{{#if condition}}` â†’ æ¡ä»¶åˆ¤æ–­

## ğŸ”„ ä»£ç ç‰‡æ®µåˆå¹¶

ç³»ç»Ÿæ”¯æŒçµæ´»çš„ä»£ç ç‰‡æ®µåˆå¹¶æœºåˆ¶ï¼š

### ç‰‡æ®µé…ç½®
```json
{
  "targetFile": "src/middleware.ts",
  "insertPosition": "function-body",
  "order": 100
}
```

### æ”¯æŒçš„æ’å…¥ä½ç½®
- `function-body` â†’ å‡½æ•°ä½“å†…
- `imports` â†’ å¯¼å…¥è¯­å¥åŒº
- `dependencies` â†’ package.json ä¾èµ–
- `exports` â†’ å¯¼å‡ºè¯­å¥åŒº

### åˆå¹¶ç­–ç•¥
- `append` â†’ è¿½åŠ å†…å®¹
- `merge-object` â†’ åˆå¹¶å¯¹è±¡ï¼ˆç”¨äº JSONï¼‰
- `replace` â†’ æ›¿æ¢å†…å®¹

## ğŸ¨ Few Shot ç¤ºä¾‹

### ç”µå•†å’–å•¡ç½‘ç«™
```xml
<endpoints>
1. **é¡¾å®¢ç«¯**
   - æœªç™»å½•çŠ¶æ€
   - å·²ç™»å½•çŠ¶æ€  
   - **å­˜åœ¨å…±äº«é¡µé¢**
   - **ç™»å½•åé»˜è®¤é¡µé¢**: /account

2. **å•†å®¶ç®¡ç†ç«¯**
   - ä»…å·²ç™»å½•çŠ¶æ€
   - **è§’è‰²**ï¼šåº—é•¿ã€å‘˜å·¥
   - **ç™»å½•åé»˜è®¤é¡µé¢**: /dashboard

3. **è¶…çº§ç®¡ç†å‘˜ç«¯**
   - ä»…å·²ç™»å½•çŠ¶æ€
   - **ç™»å½•åé»˜è®¤é¡µé¢**: /dashboard
</endpoints>
```

### SaaSé¡¹ç›®ç®¡ç†
```xml
<endpoints>
1. **ç”¨æˆ·ç«¯**
   - æœªç™»å½•çŠ¶æ€
   - å·²ç™»å½•çŠ¶æ€
   - **å­˜åœ¨å…±äº«é¡µé¢**
   - **è§’è‰²**ï¼šæ™®é€šç”¨æˆ·ã€Teamç®¡ç†å‘˜ã€ç»„ç»‡ç®¡ç†å‘˜
   - **ç™»å½•åé»˜è®¤é¡µé¢**: /dashboard

2. **å¹³å°ç®¡ç†ç«¯**
   - ä»…å·²ç™»å½•çŠ¶æ€
   - **ç™»å½•åé»˜è®¤é¡µé¢**: /dashboard
</endpoints>
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ç«¯ç±»å‹

1. **æ›´æ–°é…ç½®**
```json
{
  "endpoints": [
    {
      "name": "teacher",
      "displayName": "æ•™å¸ˆç«¯",
      "pathPrefix": "/teacher",
      "defaultPage": "workspace",
      "authType": "nextauth",
      "tableName": "teacher_users"
    }
  ]
}
```

2. **æ‰§è¡Œæ¸²æŸ“**
```bash
pnpm template:render
```

3. **è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘**
```bash
# åœ¨ç”Ÿæˆçš„ç»“æ„åŸºç¡€ä¸Šæ·»åŠ ä¸šåŠ¡åŠŸèƒ½
src/app/teacher/dashboard/courses/page.tsx
src/app/api/teacher/courses/route.ts
src/stores/teacher/courses-store.ts
```

### æ‰©å±•æ¨¡æ¿ç³»ç»Ÿ

**æ·»åŠ æ–°çš„ä»£ç ç‰‡æ®µç±»å‹ï¼š**
```
code-snippets/
â””â”€â”€ next.config.mjs/
    â””â”€â”€ middleware-config-{{ENDPOINT_NAME}}.js.snippet
```

**ç‰‡æ®µå†…å®¹ï¼š**
```json
{
  "targetFile": "next.config.mjs",
  "insertPosition": "exports",
  "order": 50
}
---
export const {{name}}Config = {
  // ç«¯ç‰¹å®šé…ç½®
}
```

### è‡ªå®šä¹‰è®¤è¯ç­–ç•¥

**OAuth æ”¯æŒï¼š**
```json
{
  "authType": "nextauth",
  "providers": ["google", "github"],
  "allowSocialLogin": true
}
```

**è‡ªå®šä¹‰è®¤è¯å­—æ®µï¼š**
```json
{
  "loginField": "phone",
  "additionalFields": ["verificationCode"],
  "requireTwoFactor": true
}
```

## ğŸ“Š æ¶æ„ä¼˜åŠ¿

### ğŸ¯ **ç²¾ç¡®åŒ¹é…ä¸šåŠ¡éœ€æ±‚**
- æ ¹æ®ä¸šåŠ¡åœºæ™¯è‡ªåŠ¨åˆ¤æ–­ç«¯çš„æ•°é‡å’Œç±»å‹
- é¿å…è¿‡åº¦è®¾è®¡æˆ–åŠŸèƒ½ä¸è¶³
- ç”Ÿæˆæœ€è´´åˆå®é™…éœ€æ±‚çš„æ¶æ„

### ğŸ§© **å®Œå…¨æ¨¡å—åŒ–**
- æ¯ä¸ªç«¯éƒ½æ˜¯ç‹¬ç«‹çš„åŸå­åŒ–æ¨¡å—
- ç«¯é—´å®Œå…¨è§£è€¦ï¼Œäº’ä¸å½±å“
- æ”¯æŒå¹¶è¡Œå¼€å‘å’Œç‹¬ç«‹éƒ¨ç½²

### ğŸ”„ **é«˜åº¦å¯æ‰©å±•**
- æ–°å¢ç«¯åªéœ€æ›´æ–°é…ç½®æ–‡ä»¶
- æ¨¡æ¿ç³»ç»Ÿæ”¯æŒä»»æ„å¤æ‚åº¦çš„å®šåˆ¶
- ä»£ç ç‰‡æ®µåˆå¹¶æœºåˆ¶æå…¶çµæ´»

### ğŸš€ **å¼€å‘æ•ˆç‡**
- ä»ä¸šåŠ¡æè¿°åˆ°å®Œæ•´é¡¹ç›®ï¼Œå‡ åˆ†é’Ÿå®Œæˆ
- æ ‡å‡†åŒ–çš„æ¶æ„å‡å°‘å­¦ä¹ æˆæœ¬
- è‡ªåŠ¨åŒ–çš„ä»£ç ç”Ÿæˆé¿å…é‡å¤å·¥ä½œ

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æ¸²æŸ“å¤±è´¥ï¼Œæç¤ºæ¨¡æ¿å˜é‡æœªæ‰¾åˆ°**
A: æ£€æŸ¥ `config.json` ä¸­çš„å­—æ®µæ˜¯å¦å®Œæ•´ï¼Œç‰¹åˆ«æ˜¯å¿…éœ€å­—æ®µå¦‚ `name`ã€`pathPrefix` ç­‰ã€‚

**Q: ä»£ç ç‰‡æ®µåˆå¹¶å¤±è´¥**
A: ç¡®è®¤ç›®æ ‡æ–‡ä»¶å­˜åœ¨ï¼Œæ£€æŸ¥ç‰‡æ®µé…ç½®ä¸­çš„ `insertPosition` æ˜¯å¦æ­£ç¡®ã€‚

**Q: è®¤è¯ä¸å·¥ä½œ**
A: æ£€æŸ¥ç¯å¢ƒå˜é‡è®¾ç½®ï¼Œç¡®ä¿ `NEXTAUTH_SECRET` ç­‰è®¤è¯å¯†é’¥å·²é…ç½®ã€‚

**Q: æ•°æ®åº“è¿æ¥å¤±è´¥**
A: ç¡®è®¤æ•°æ®åº“é…ç½®æ­£ç¡®ï¼Œè¿è¡Œ `pnpm db:push` åˆ›å»ºè¡¨ç»“æ„ã€‚

### è°ƒè¯•æŠ€å·§

**æŸ¥çœ‹æ¸²æŸ“è¾“å‡ºï¼š**
```bash
# æ¸²æŸ“è¾“å‡ºä¿å­˜åœ¨ templates/rendered-output/
ls templates/rendered-output/
```

**éªŒè¯é…ç½®ï¼š**
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•
node -e "console.log(JSON.parse(require('fs').readFileSync('templates/config.json')))"
```

**æµ‹è¯•å•ä¸ªç«¯ï¼š**
```json
{
  "endpoints": [
    // åªä¿ç•™ä¸€ä¸ªç«¯è¿›è¡Œæµ‹è¯•
  ]
}
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æ·»åŠ æ–°çš„ä¸šåŠ¡åœºæ™¯æ¨¡æ¿
1. åœ¨ `templates/scenarios/` åˆ›å»ºæ–°åœºæ™¯
2. æä¾› few shot ç¤ºä¾‹
3. æ›´æ–°æ–‡æ¡£è¯´æ˜

### æ‰©å±•æ¨¡æ¿åŠŸèƒ½
1. Fork é¡¹ç›®
2. åœ¨ `templates/basic/` æ·»åŠ æ–°æ¨¡æ¿
3. æµ‹è¯•æ¸²æŸ“åŠŸèƒ½
4. æäº¤ PR

### æŠ¥å‘Šé—®é¢˜
- æè¿°ä¸šåŠ¡åœºæ™¯
- æä¾›é…ç½®æ–‡ä»¶
- é™„ä¸Šé”™è¯¯æ—¥å¿—

## ğŸ“œ è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶

---

ğŸ‰ **äº«å—é«˜æ•ˆçš„å¤šç«¯å¼€å‘ä½“éªŒï¼**